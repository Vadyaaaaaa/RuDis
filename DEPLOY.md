# –î–µ–ø–ª–æ–π Ruscord –Ω–∞ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π —Ö–æ—Å—Ç–∏–Ω–≥

## üéØ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –≤–∞—Ä–∏–∞–Ω—Ç: Fly.io

**–ü–æ—á–µ–º—É Fly.io:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π –ø–ª–∞–Ω (3 shared-cpu-1x VMs)
- ‚úÖ –ù–µ –∑–∞—Å—ã–ø–∞–µ—Ç (–≤–∞–∂–Ω–æ –¥–ª—è Socket.io)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket –∏–∑ –∫–æ—Ä–æ–±–∫–∏
- ‚úÖ –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Å–µ—Ç—å (–±—ã—Å—Ç—Ä–∞—è —Ä–∞–±–æ—Ç–∞)
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Node.js –∏ PostgreSQL

### –®–∞–≥–∏ –¥–µ–ø–ª–æ—è –Ω–∞ Fly.io:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Fly CLI:**
   ```bash
   # Windows (PowerShell)
   powershell -Command "iwr https://fly.io/install.ps1 -useb | iex"
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ –∞–∫–∫–∞—É–Ω—Ç:**
   ```bash
   fly auth signup
   ```

3. **–°–æ–∑–¥–∞–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è backend:**
   ```bash
   cd server
   fly launch
   ```
   - –í—ã–±–µ—Ä–∏—Ç–µ —Ä–µ–≥–∏–æ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, `iad` –¥–ª—è –°–®–ê)
   - –°–æ–∑–¥–∞–π—Ç–µ PostgreSQL –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SQLite)

4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ fly.toml** (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏):
   ```toml
   app = "ruscord-backend"
   primary_region = "iad"

   [build]

   [http_service]
     internal_port = 3001
     force_https = true
     auto_stop_machines = false
     auto_start_machines = true
     min_machines_running = 1
     processes = ["app"]

   [[services]]
     protocol = "tcp"
     internal_port = 3001
     
     [[services.ports]]
       port = 80
       handlers = ["http"]
       force_https = true
     
     [[services.ports]]
       port = 443
       handlers = ["tls", "http"]
   ```

5. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   ```bash
   fly secrets set JWT_SECRET=your-secret-key
   fly secrets set CLIENT_URL=https://your-frontend-url.vercel.app
   ```

6. **–î–µ–ø–ª–æ–π:**
   ```bash
   fly deploy
   ```

7. **–î–ª—è frontend –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Vercel:**
   - –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
   - –£–∫–∞–∂–∏—Ç–µ build –∫–æ–º–∞–Ω–¥—É: `cd client && npm install && npm run build`
   - –£–∫–∞–∂–∏—Ç–µ output directory: `client/dist`
   - –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è: `VITE_API_URL=https://ruscord-backend.fly.dev`

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

### 1. Railway (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞)

**–ü–ª—é—Å—ã:**
- ‚úÖ $5 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å—è—Ü
- ‚úÖ –ù–µ –∑–∞—Å—ã–ø–∞–µ—Ç
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –¥–µ–ø–ª–æ–π

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã (–º–æ–∂–µ—Ç –Ω–µ —Ö–≤–∞—Ç–∏—Ç—å –Ω–∞ –º–µ—Å—è—Ü)

**–î–µ–ø–ª–æ–π:**
1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ https://railway.app
2. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ GitHub
3. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
4. –î–æ–±–∞–≤—å—Ç–µ —Å–µ—Ä–≤–∏—Å –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
5. –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `server`
6. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
7. Railway –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç Node.js –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç

### 2. Render (–ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π, –Ω–æ –∑–∞—Å—ã–ø–∞–µ—Ç)

**–ü–ª—é—Å—ã:**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π
- ‚úÖ 750 —á–∞—Å–æ–≤/–º–µ—Å—è—Ü

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –ó–∞—Å—ã–ø–∞–µ—Ç –ø–æ—Å–ª–µ 15 –º–∏–Ω—É—Ç –±–µ–∑–¥–µ–π—Å—Ç–≤–∏—è (–ø–ª–æ—Ö–æ –¥–ª—è Socket.io)
- ‚ùå –ü–µ—Ä–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞—Å—ã–ø–∞–Ω–∏—è –º–µ–¥–ª–µ–Ω–Ω–æ–µ

**–ü–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–µ –¥–ª—è production!**

### 3. Cyclic (–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ –¥–ª—è Node.js)

**–ü–ª—é—Å—ã:**
- ‚úÖ –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π
- ‚úÖ –ù–µ –∑–∞—Å—ã–ø–∞–µ—Ç
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –∏–∑ GitHub

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ú–µ–Ω—å—à–µ –∏–∑–≤–µ—Å—Ç–µ–Ω, –º–µ–Ω—å—à–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:

### –í–∞—Ä–∏–∞–Ω—Ç 1: Fly.io (Backend) + Vercel (Frontend)
- **Backend:** Fly.io (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–µ –∑–∞—Å—ã–ø–∞–µ—Ç)
- **Frontend:** Vercel (–±–µ—Å–ø–ª–∞—Ç–Ω–æ, –±—ã—Å—Ç—Ä—ã–π CDN)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è) –∏–ª–∏ PostgreSQL –Ω–∞ Fly.io

### –í–∞—Ä–∏–∞–Ω—Ç 2: Railway (–í—Å–µ –≤–º–µ—Å—Ç–µ)
- **Backend + Frontend:** Railway
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** PostgreSQL –Ω–∞ Railway
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ:** $5 –∫—Ä–µ–¥–∏—Ç–æ–≤/–º–µ—Å—è—Ü

---

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è production:

1. **–ò–∑–º–µ–Ω–∏—Ç–µ CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   ```javascript
   // server/index.js
   const io = new Server(httpServer, {
     cors: {
       origin: process.env.CLIENT_URL || 'https://your-frontend.vercel.app',
       methods: ['GET', 'POST'],
     },
   });
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –≤–º–µ—Å—Ç–æ SQLite:**
   - SQLite –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è production
   - –ù–∞—Å—Ç—Ä–æ–π—Ç–µ PostgreSQL –Ω–∞ Fly.io –∏–ª–∏ Railway

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
   - `JWT_SECRET` - —Å–ª—É—á–∞–π–Ω–∞—è —Å—Ç—Ä–æ–∫–∞
   - `CLIENT_URL` - URL –≤–∞—à–µ–≥–æ frontend
   - `DATABASE_URL` - –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ PostgreSQL

4. **–û–±–Ω–æ–≤–∏—Ç–µ client/src/store/socketStore.ts:**
   ```typescript
   const socket = io(import.meta.env.VITE_API_URL || 'http://localhost:3001', {
     auth: { token },
   });
   ```

---

## –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏:

- Fly.io: https://fly.io
- Railway: https://railway.app
- Vercel: https://vercel.com
- Render: https://render.com

